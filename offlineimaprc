[general]
accounts = sundhall.se
pythonfile = ~/.offlineimap/keychain.py

[Account sundhall.se]
localrepository = sundhall.se_local
remoterepository = sundhall.se_remote
postsynchook = ~/bin/notify_email

[Account smspark.se]
localrepository = local_smspark.se
remoterepository = remote_smspark.se
postsynchook = ~/bin/notify_email

[Repository sundhall.se_local]
type = Maildir
localfolders = ~/.mail/sundhall.se
nametrans = lambda folder: {'inbox': 'INBOX',
                            'archive': 'INBOX.Archive',
                            'drafts': 'INBOX.Drafts',
                            'sent': 'INBOX.Sent Items',
                            'trash': 'INBOX.Trash',
                            'spam': 'INBOX.Junk Mail',
                              }.get(folder, folder)

[Repository sundhall.se_remote]
type = IMAP
remotehost = mail.messagingengine.com
remoteport = 993
remoteuser = patrik@sundhall.se
remotepasseval = get_keychain_pass(account="patrik@sundhall.se", server="mail.messagingengine.com")
ssl = yes
sslcacertfile = /usr/local/etc/openssl/cert.pem
nametrans = lambda folder: {'INBOX': 'inbox',
                            'INBOX.Archive': 'archive',
                            'INBOX.Drafts': 'drafts',
                            'INBOX.Sent Items': 'sent',
                            'INBOX.Trash': 'trash',
                            'INBOX.Junk Mail': 'spam',
                              }.get(folder, folder)

expunge = no

[Repository local_smspark.se]
type = Maildir
localfolders = ~/.mail/smspark.se
nametrans: lambda folder: {'[Gmail]/Trash'   : 'trash',
                           '[Gmail]/Spam'    : 'spam',
                           '[Gmail]/Sent Mail' : 'sent',
                           '[Gmail]/Drafts'    : 'drafts',
                           '[Gmail]/All Mail'  : 'archive',
                           'INBOX'             : 'inbox',
                           }.get (folder, folder)

[Repository remote_smspark.se]
type = Gmail
remoteuser = patrik@smspark.se
remotepasseval = get_keychain_pass(account="patrik@smspark.se", server="imap.gmail.com")
sslcacertfile = /usr/local/etc/openssl/cert.pem
realdelete = no
nametrans: lambda folder: {'[Gmail]/Trash'   : 'trash',
                           '[Gmail]/Spam'    : 'spam',
                           '[Gmail]/Sent Mail' : 'sent',
                           '[Gmail]/Drafts'    : 'drafts',
                           '[Gmail]/All Mail'  : 'archive',
                           'INBOX'             : 'inbox',
                           }.get (folder, folder)
folderfilter: lambda folder: folder in ['[Gmail]/Trash',
                                        '[Gmail]/Spam',
                                        '[Gmail]/Sent Mail',
                                        '[Gmail]/Drafts',
                                        '[Gmail]/All Mail',
                                        'INBOX'
                                        ]
